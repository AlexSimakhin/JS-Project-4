!function(){var t={6063:function(t,e,n){"use strict";n(1539),n(8674),n(5666),n(2222),n(3371),n(9714);var r="https://lab.lectrum.io/js2/api/crm",a=function(){return localStorage.getItem("token")};function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n(9554),n(4747);var i=document.querySelector(".tasks__column.new"),c=document.querySelector(".tasks__column.in-progress"),u=document.querySelector(".tasks__column.done"),s=i.querySelector(".count"),f=c.querySelector(".count"),l=u.querySelector(".count"),d={"Низкий":"green","Высокий":"yellow","Срочный":"red"},p=function(t,e){var n=t.status,r=t.title,a=t.manager,o=t.deadline,i=t.hash,c=t.amount;return'\n  <div class="task task__block '.concat(d[n]||"",'" data-title="').concat(r,'" data-hash="').concat(i,'" data-amount="').concat(c,'" data-status="').concat(n,'" data-deadline="').concat(o,'" draggable="true">\n    <h2 class="task__title">').concat(r,'</h2>\n    <p class="task__deadline">Закрыть до: <span>').concat(e,'</span></p>\n    <div class="task__executor flex">\n      <img src="img/icon/ava-empty.svg" class="executor__img" alt="">\n      <p class="executor__name">').concat(a,'</p>\n    </div>\n    <img src="img/icon/icons-delete.svg" class="remove__icon" alt="delete" data-hash="').concat(i,'">\n\n    <p class="price">$').concat(c,"</p>\n  </div>\n")},h=function(t){document.querySelectorAll(".task.task__block").forEach((function(t){return t.remove()}));var e,n="",r="",a="",d=0,h=0,v=0,m=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){u=!0,i=t},f:function(){try{c||null==n.return||n.return()}finally{if(u)throw i}}}}(t.docs);try{for(m.s();!(e=m.n()).done;){var g=e.value,y=new Date(g.deadline).toLocaleDateString("ru",{year:"numeric",month:"long",day:"numeric"});"new"===g.pipeline&&(n+=p(g,y),d++),"inProgress"===g.pipeline&&(r+=p(g,y),h++),"done"===g.pipeline&&(a+=p(g,y),v++)}}catch(t){m.e(t)}finally{m.f()}i.insertAdjacentHTML("beforeend",n),c.insertAdjacentHTML("beforeend",r),u.insertAdjacentHTML("beforeend",a),s.innerHTML=d,f.innerHTML=h,l.innerHTML=v};function v(t,e,n,r,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,a)}function m(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){v(o,r,a,i,c,"next",t)}function c(t){v(o,r,a,i,c,"throw",t)}i(void 0)}))}}var g=Object.freeze({getLeads:{fetch:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(m(regeneratorRuntime.mark((function t(){var e,n,o,i,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(r,"/leads"),{method:"GET",headers:{accept:"application/json","x-token":a()}});case 2:if((e=t.sent).ok){t.next=10;break}return t.next=6,e.json();case 6:throw n=t.sent,o=n.message,toastr.error(o,"Ошибка!"),new Error(o);case 10:return t.next=12,e.json();case 12:i=t.sent,c=i.data,h(c);case 15:case"end":return t.stop()}}),t)}))))},deleteLead:{fetch:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=m(regeneratorRuntime.mark((function t(e){var n,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(r,"/leads/").concat(e),{method:"DELETE",headers:{accept:"application/json","x-token":a()}});case 2:if((n=t.sent).ok){t.next=10;break}return t.next=6,n.json();case 6:throw o=t.sent,i=o.message,toastr.error(i,"Ошибка!"),new Error(i);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},putLead:{fetch:function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=m(regeneratorRuntime.mark((function t(e,n){var a,o,i,c,u,s,f,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.title,o=e.amount,i=e.pipeline,c=e.status,u=e.deadline,s={title:a,amount:o,pipeline:i,status:c,deadline:u},t.next=4,fetch("".concat(r,"/leads/").concat(n),{method:"PUT",headers:{accept:"application/json","x-token":localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify(s)});case 4:if((f=t.sent).ok){t.next=12;break}return t.next=8,f.json();case 8:throw l=t.sent,d=l.message,toastr.error(d,"Ошибка!"),new Error(d);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}});function y(t,e,n,r,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,a)}var x=document.querySelectorAll(".task.task__dnd"),b=function(){x.forEach((function(t){t.classList.remove("show")}))};function w(t,e,n,r,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,a)}function S(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){w(o,r,a,i,c,"next",t)}function c(t){w(o,r,a,i,c,"throw",t)}i(void 0)}))}}var k,L=document.getElementById("taskboard");S(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.getLeads.fetch();case 2:case"end":return t.stop()}}),t)})))(),L.onclick=function(){var t=S(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.target.closest(".remove__icon")){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,g.deleteLead.fetch(n.dataset.hash);case 5:return t.next=7,g.getLeads.fetch();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),document.addEventListener("dragstart",(function(t){k=t.target.closest(".task");var e=t.target.closest("img");e?t.preventDefault():null!==k&&null!==e&&(t.target.style.opacity=.5)}),!1),document.addEventListener("dragend",(function(t){t.target.style.opacity="",b()}),!1),document.addEventListener("dragover",(function(t){t.preventDefault()}),!1),document.addEventListener("dragenter",(function(t){var e=t.target.closest(".tasks__column");e&&null!==k&&null!==e&&x.forEach((function(t){if(t.dataset.id===e.dataset.id){if(e.dataset.id===k.parentNode.dataset.id)return;t.classList.add("show")}else t.classList.remove("show")}))}),!1),document.addEventListener("drop",function(){var t,e=(t=regeneratorRuntime.mark((function t(e){var n,r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),n=e.target.closest(".task__dnd")){t.next=4;break}return t.abrupt("return");case 4:if(null!==k&&null!==n){t.next=6;break}return t.abrupt("return");case 6:if(k.parentNode.dataset.id!==n.dataset.id){t.next=9;break}return b(),t.abrupt("return");case 9:return a={},"new"===n.dataset.id&&(r=k.dataset.hash,a.title=k.dataset.title,a.amount=+k.dataset.amount,a.pipeline="new",a.status=k.dataset.status,a.deadline=k.dataset.deadline),"inProgress"===n.dataset.id&&(r=k.dataset.hash,a.title=k.dataset.title,a.amount=+k.dataset.amount,a.pipeline="inProgress",a.status=k.dataset.status,a.deadline=k.dataset.deadline),"done"===n.dataset.id&&(r=k.dataset.hash,a.title=k.dataset.title,a.amount=+k.dataset.amount,a.pipeline="done",a.status=k.dataset.status,a.deadline=k.dataset.deadline),b(),t.next=17,g.putLead.fetch(a,r);case 17:return t.next=19,g.getLeads.fetch();case 19:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){y(o,r,a,i,c,"next",t)}function c(t){y(o,r,a,i,c,"throw",t)}i(void 0)}))});return function(t){return e.apply(this,arguments)}}(),!1)},8533:function(t,e,n){"use strict";var r=n(2092).forEach,a=n(9341),o=n(9207),i=a("forEach"),c=o("forEach");t.exports=i&&c?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},2092:function(t,e,n){var r=n(9974),a=n(8361),o=n(7908),i=n(7466),c=n(5417),u=[].push,s=function(t){var e=1==t,n=2==t,s=3==t,f=4==t,l=6==t,d=7==t,p=5==t||l;return function(h,v,m,g){for(var y,x,b=o(h),w=a(b),S=r(v,m,3),k=i(w.length),L=0,E=g||c,_=e?E(h,k):n||d?E(h,0):void 0;k>L;L++)if((p||L in w)&&(x=S(y=w[L],L,b),t))if(e)_[L]=x;else if(x)switch(t){case 3:return!0;case 5:return y;case 6:return L;case 2:u.call(_,y)}else switch(t){case 4:return!1;case 7:u.call(_,y)}return l?-1:s||f?f:_}};t.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6),filterOut:s(7)}},1194:function(t,e,n){var r=n(7293),a=n(5112),o=n(7392),i=a("species");t.exports=function(t){return o>=51||!r((function(){var e=[];return(e.constructor={})[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},9341:function(t,e,n){"use strict";var r=n(7293);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},9207:function(t,e,n){var r=n(9781),a=n(7293),o=n(6656),i=Object.defineProperty,c={},u=function(t){throw t};t.exports=function(t,e){if(o(c,t))return c[t];e||(e={});var n=[][t],s=!!o(e,"ACCESSORS")&&e.ACCESSORS,f=o(e,0)?e[0]:u,l=o(e,1)?e[1]:void 0;return c[t]=!!n&&!a((function(){if(s&&!r)return!0;var t={length:-1};s?i(t,1,{enumerable:!0,get:u}):t[1]=1,n.call(t,f,l)}))}},5417:function(t,e,n){var r=n(111),a=n(3157),o=n(5112)("species");t.exports=function(t,e){var n;return a(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!a(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},7493:function(t,e,n){"use strict";var r=n(7593),a=n(3070),o=n(9114);t.exports=function(t,e,n){var i=r(e);i in t?a.f(t,i,o(0,n)):t[i]=n}},8324:function(t){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},6677:function(t,e,n){var r=n(7293);t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},2423:function(t,e,n){var r=n(3501),a=n(111),o=n(6656),i=n(3070).f,c=n(9711),u=n(6677),s=c("meta"),f=0,l=Object.isExtensible||function(){return!0},d=function(t){i(t,s,{value:{objectID:"O"+ ++f,weakData:{}}})},p=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,s)){if(!l(t))return"F";if(!e)return"E";d(t)}return t[s].objectID},getWeakData:function(t,e){if(!o(t,s)){if(!l(t))return!0;if(!e)return!1;d(t)}return t[s].weakData},onFreeze:function(t){return u&&p.REQUIRED&&l(t)&&!o(t,s)&&d(t),t}};r[s]=!0},3157:function(t,e,n){var r=n(4326);t.exports=Array.isArray||function(t){return"Array"==r(t)}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!n.call({1:2},1);e.f=a?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},7066:function(t,e,n){"use strict";var r=n(9670);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},7908:function(t,e,n){var r=n(4488);t.exports=function(t){return Object(r(t))}},2222:function(t,e,n){"use strict";var r=n(2109),a=n(7293),o=n(3157),i=n(111),c=n(7908),u=n(7466),s=n(7493),f=n(5417),l=n(1194),d=n(5112),p=n(7392),h=d("isConcatSpreadable"),v=9007199254740991,m="Maximum allowed index exceeded",g=p>=51||!a((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),y=l("concat"),x=function(t){if(!i(t))return!1;var e=t[h];return void 0!==e?!!e:o(t)};r({target:"Array",proto:!0,forced:!g||!y},{concat:function(t){var e,n,r,a,o,i=c(this),l=f(i,0),d=0;for(e=-1,r=arguments.length;e<r;e++)if(x(o=-1===e?i:arguments[e])){if(d+(a=u(o.length))>v)throw TypeError(m);for(n=0;n<a;n++,d++)n in o&&s(l,d,o[n])}else{if(d>=v)throw TypeError(m);s(l,d++,o)}return l.length=d,l}})},9554:function(t,e,n){"use strict";var r=n(2109),a=n(8533);r({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},3371:function(t,e,n){var r=n(2109),a=n(6677),o=n(7293),i=n(111),c=n(2423).onFreeze,u=Object.freeze;r({target:"Object",stat:!0,forced:o((function(){u(1)})),sham:!a},{freeze:function(t){return u&&i(t)?u(c(t)):t}})},9714:function(t,e,n){"use strict";var r=n(1320),a=n(9670),o=n(7293),i=n(7066),c="toString",u=RegExp.prototype,s=u.toString,f=o((function(){return"/a/b"!=s.call({source:"a",flags:"b"})})),l=s.name!=c;(f||l)&&r(RegExp.prototype,c,(function(){var t=a(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in u)?i.call(t):n)}),{unsafe:!0})},4747:function(t,e,n){var r=n(7854),a=n(8324),o=n(8533),i=n(8880);for(var c in a){var u=r[c],s=u&&u.prototype;if(s&&s.forEach!==o)try{i(s,"forEach",o)}catch(t){s.forEach=o}}}},e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={exports:{}};return t[r](a,a.exports,n),a.exports}n.m=t,n.x=function(){},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t={191:0},e=[[6063,29]],r=function(){},a=function(a,o){for(var i,c,u=o[0],s=o[1],f=o[2],l=o[3],d=0,p=[];d<u.length;d++)c=u[d],n.o(t,c)&&t[c]&&p.push(t[c][0]),t[c]=0;for(i in s)n.o(s,i)&&(n.m[i]=s[i]);for(f&&f(n),a&&a(o);p.length;)p.shift()();return l&&e.push.apply(e,l),r()},o=self.webpackChunkjs_personal_projects=self.webpackChunkjs_personal_projects||[];function i(){for(var r,a=0;a<e.length;a++){for(var o=e[a],i=!0,c=1;c<o.length;c++){var u=o[c];0!==t[u]&&(i=!1)}i&&(e.splice(a--,1),r=n(n.s=o[0]))}return 0===e.length&&(n.x(),n.x=function(){}),r}o.forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o));var c=n.x;n.x=function(){return n.x=c||function(){},(r=i)()}}(),n.x()}();